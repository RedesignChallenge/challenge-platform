<% if user_signed_in? && current_user.liked?(@recipe, { vote_scope: @recipe.default_like[:scope] }) %>
  <%= link_to unlike_challenge_recipe_stage_cookbook_recipe_path(@challenge, @recipe.recipe_stage, @recipe.cookbook, @recipe.id, partial: 'like'), class: 'btn btn-block btn-fa btn-sm btn-rounded btn-info active', style: 'margin-bottom: 10px', method: :put, remote: true do %>
    <i class="<%= @recipe.default_like[:liked][:icon] %>"></i> <%= t('constants.liked') %>
    <%= "(#{@recipe.cached_votes_up})" unless @recipe.cached_votes_up.zero? %>
  <% end %>
<% else %>
  <%= link_to like_challenge_recipe_stage_cookbook_recipe_path(@challenge, @recipe.recipe_stage, @recipe.cookbook, @recipe.id, partial: 'like'), class: 'btn btn-block btn-fa btn-sm btn-rounded btn-info', style: 'margin-bottom: 10px', method: :put, remote: user_signed_in? do %>
    <i class="<%= @recipe.default_like[:unliked][:icon] %>"></i> <%= t('constants.like') %>
    <%= "(#{@recipe.cached_votes_up})" unless @recipe.cached_votes_up.zero? %>
  <% end %>
<% end %>