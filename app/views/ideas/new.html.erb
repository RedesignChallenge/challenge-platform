<%= render partial: 'challenges/header', cache: true %>

<div id='idea-form' ng-controller='IdeaCtrl'>
  <div class='container'>
    <%= link_to "<i class='fa fa-close fa-2x'></i>".html_safe, challenge_idea_stage_path(@challenge, @idea.idea_stage), data: { confirm: "#{t('ideas.new.confirm')}" } %>
    <div class='clearfix'></div>

    <%= render partial: 'ideas/header' %>
  </div>

  <div class='example-switch'>

    <% if @idea.refinement_parent %>
      <div ng-show='refinement'>
        <div class='container'>
          <%= render partial: 'ideas/refinement' %>
        </div>

        <div id='refinement-idea-hide' class='well well-example well-right' ng-click="showForm()">
          <p class='example-heading'><%= t('ideas.new.header') %></p>
          <p class='example-description'><%= t('ideas.new.description') %></p>
        </div>
      </div>
    <% end %>

    <div ng-show='form'>
      <% if @idea.refinement_parent %>
        <div id='refinement-idea-show' class='well well-example well-left' ng-click="showRefinement()" ng-show='refinement_parent_id'>
          <p class='example-heading'><%= t('ideas.new.header2') %></p>
          <p class='example-description'><%= t('ideas.new.description2') %></p>
        </div>
      <% end %>

      <div class='container'>
        <%= render partial: 'ideas/form', locals: { url: challenge_idea_stage_problem_statement_ideas_path, cancel_path: challenge_idea_stage_path(@challenge, @idea.idea_stage), submit_text: "#{t('ideas.new.submit')}"} %>
      </div>

      <div id='example-idea-show' class='well well-example well-right' ng-click="showExample()">
        <p class='example-heading'><%= t('ideas.new.header3') %></p>
        <p class='example-description'><%= t('ideas.new.description3') %></p>
      </div>
    </div>

    <div ng-show='example'>
      <div id='example-idea-hide' class='well well-example well-left' ng-click="showForm()">
        <p class='example-heading'><%= t('ideas.new.header') %></p>
        <p class='example-description'><%= t('ideas.new.description') %></p>
      </div>

      <div class='container'>
        <%= render partial: 'ideas/example' %>
      </div>
    </div>
  </div>
</div>