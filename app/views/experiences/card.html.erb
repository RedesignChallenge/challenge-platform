<div id='experience-<%= experience.id %>' class="row row-experience">

  <div class="col-xs-2">
    <div class='experience-user center-block text-center'>
      <% if experience.user.avatar.present? %>
        <%= image_tag(experience.user.avatar.profile.url, class: 'img-circle', style: 'width:3.5em') %>
      <% else %>
        <% if user_signed_in? && current_user == experience.user %>
          <span class="fa-stack fa-lg new-user-avatar">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-inverse fa-stack-1x">you</i>
          </span>
        <% else %>
          <span class="fa-stack fa-lg new-user-avatar">
            <i class="fa fa-circle fa-stack-2x" style='color:<%= experience.user.color %>'></i>
            <i class="fa fa-inverse fa-stack-1x"><%= experience.user.initials %></i>
          </span>
        <% end %>
      <% end %>
      <div class="caption">
        <p class='name'><%= experience.user.display_name %></p>
        <p class='title'><%= experience.user.display_organization %></p>
      </div>
    </div>
  </div>

  <div class="col-xs-10">

    <div ng-switch='experience_<%= experience.id %>_discussion' ng-init='experience_<%= experience.id %>_discussion=false'>
      <div class='well well-experience' ng-class="{discussion: experience_<%= experience.id %>_discussion}">
        <% if user_signed_in? && experience.user == current_user %>
          <div ng-switch="experience_<%= experience.id %>_edit" ng-init="experience_<%= experience.id %>_edit=false">
            <div ng-hide="experience_<%= experience.id %>_edit">
              <%= render partial: 'experiences/card/show', locals: { experience: experience } %>
            </div>

            <div ng-show="experience_<%= experience.id %>_edit">
              <%= render partial: 'experiences/card/edit', locals: { experience: experience } %>
            </div>
          </div>
        <% else %>
          <%= render partial: 'experiences/card/show', locals: { experience: experience } %>
        <% end %>
      </div>

      <div class='well well-experience-discussion' ng-show='experience_<%= experience.id %>_discussion'>
        <div class='experience-discussion'>
          <%= render partial: 'experiences/card/discussion', locals: { experience: experience } %>
        </div>
      </div>
    </div>

  </div>

</div>